{% extends "base.html" %}
{% load i18n %}

{% block content %}
  <div class="title profile">
      <h3>{% trans "Your Profile" %}</h3>
  </div>
  <div class="block turq">
    <div class="signin-form">
      <P>
        <label class="label-wide">{% trans "Hello " %}
        {{ username }}<br>
        <a href="{% url 'molo.profiles:auth_logout' %}" class="button inverted">{% trans "log out" %}</a>
      </p>
      <label class="label-wide">{% trans "Display Name:" %}
        {{ alias }}
      </label>
  		<form method="post" id="frmProfileEdit" action="{% url 'molo.profiles:edit_my_profile' %}">{% csrf_token %}
  		  {{ edit_profile_form.alias }}

  		  <input type="submit" value='{% trans "Update profile" %}' class="btn btn-wide">
  		</form>
      <br>
      <form method="post" id="frmProfilePasswordChange" action="{% url 'molo.profiles:profile_password_change' %}" class="profile">{% csrf_token %}
        {% if form.errors or form.non_field_errors %}
          {% if form.non_field_errors %}
            {% for error in form.non_field_errors %}
                <p class="errorlist">{{ error }}</p>
            {% endfor %}
          {% endif %}
        {% endif %}

        {% if messages %}
          <ul class="errorlist">
              {% for message in messages %}
              <li>{{ message }}</li>
              {% endfor %}
          </ul>
        {% endif %}
        <div>
          {{password_change_form.old_password}}
          <span>{{password_change_form.old_password.errors}}</span>
        </div>
        <div>
          {{password_change_form.new_password}}
          <span>{{form.new_password.errors}}</span>
        </div>
        <div>
          {{password_change_form.confirm_password}}
          <span>{{form.confirm_password.errors}}</span>
        </div>
        <input type="submit" value='{% trans "Change Password" %}'>
      </form>
    </div>
  </div>
{% endblock %}
