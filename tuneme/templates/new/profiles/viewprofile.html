{% extends "base.html" %}
{% load i18n wagtailsettings_tags %}
{% get_settings %}


{% block content %}
<div class="heading heading--auth">
	{% trans "Hello" %} {{ username }}
</div>

<div class="auth-tools">
  <form method="post" action="{% url 'molo.profiles:edit_my_profile' %}">
    {% csrf_token %}

    <label for="id_alias">{% trans "Nickname" %} <span>({% trans "Appears in comments" %})</span></label>
    <input type="text" name="alias" id="id_alias" value="{{ alias }}" />

    {% if settings.profiles.UserProfilesSettings.show_mobile_number_field %}
      <label for="id_mobile_number">{% trans "Mobile number" %} <span>{% trans "(eg: 260979000001)" %}</span></label>
      {{ edit_profile_form.mobile_number.errors}}
      {{ edit_profile_form.mobile_number }}
    {% endif %}
    <input type="submit" class="submit-button" value="{% trans "Update" %}">
  </form>
</div>

<div class="heading heading--auth">
	{% trans "Change 4 digit pin" %}
</div>
<div class="auth-tools">
  <form method="post" action="{% url 'molo.profiles:profile_password_change' %}" class="profile">
    {% csrf_token %}
    {% if form.errors or form.non_field_errors %}
      {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
            <p class="errorlist">{{ error }}</p>
        {% endfor %}
      {% endif %}
    {% endif %}
    {% if messages %}
      <ul class="errorlist">
          {% for message in messages %}
          <li>{{ message }}</li>
          {% endfor %}
      </ul>
    {% endif %}
    <div>
      <p>{% trans "Old Password:" %}</p>
      {{password_change_form.old_password}}
      <span>{{password_change_form.old_password.errors}}</span>
    </div>
    <div>
      <p>{% trans "New Password:" %}</p>
      {{password_change_form.new_password}}
      <span>{{form.new_password.errors}}</span>
    </div>
    <div>
      <p>{% trans "Confirm Password:" %}</p>
      {{password_change_form.confirm_password}}
      <span>{{form.confirm_password.errors}}</span>
    </div>
    <input type="submit" class="submit-button" value='{% trans "Change Password" %}'>
  </form>
</div>
</div>
{% endblock %}
